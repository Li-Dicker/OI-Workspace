(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{1192:function(t,e,r){"use strict";var o=r(918);r.n(o).a},1366:function(t,e,r){"use strict";r.r(e);var o=r(26),a=r.n(o),n=r(43),s=r.n(n),l=r(807),u=r(8),i=r(14),c={components:{LLink:u.n,LBadge:u.a,LButton:u.b,LFreeButton:u.j,LStats:u.w,LUserName:u.D,LInputGroup:u.m,HeaderLayout:l.a},props:{currentData:{type:Object,required:!0},currentTemplate:{type:String,required:!0},currentUser:{type:Object,default:null}},meta(){return{title:this.problemTitle}},data(){return{bookmarked:this.currentData.bookmarked,bookmarking:!1}},computed:{stats(){return[{key:"提交",value:Object(i.g)(this.problem.totalSubmit)},{key:"通过",value:Object(i.g)(this.problem.totalAccepted)},{key:"时间限制",value:0!==this.problem.limits.time.length?Object(i.h)(this.problem.limits.time,i.j):"无数据"},{key:"内存限制",value:0!==this.memoryLimit.length?Object(i.h)(this.memoryLimit,i.i):"无数据"}]},problemTitle(){return"".concat(this.problem.pid," ").concat(this.problem.title)},problem(){return this.currentData.problem},isSubmitBlock(){return"#submit"===this.$route.hash},memoryLimit(){return this.problem.limits.memory.map(t=>1024*t)}},watch:{"currentData.bookmarked"(t){this.bookmarked=!!t&&t.bookmarked}},methods:{toggleBookmark(){var t=this;return s()(a.a.mark(function e(){var r,o,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.bookmarking=!0,r=!t.bookmarked,e.next=4,t.$lfeGetRoute({name:"api.problem.tasklist_".concat(r?"add":"remove")});case 4:return o=e.sent,e.prev=5,e.next=8,Object(i.n)(o.href,{pid:t.currentData.problem.pid});case 8:return e.next=10,new Promise(t=>setTimeout(t,200));case 10:t.$swalToastSuccess("成功将题目".concat(r?"加入":"移出","任务列表")),t.bookmarked=!t.bookmarked,t.bookmarking=!1,e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(5),n=e.t0.response||{},e.next=20,t.$swalToastError("".concat(n.data?n.data.errorMessage:e.t0.message));case 20:case"end":return e.stop()}},e,null,[[5,15]])}))()}}},m=(r(1192),r(7)),p=Object(m.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header-layout",t._g(t._b({},"header-layout",t.$props,!1),t.$listeners),[r("template",{slot:"title"},[t._v(t._s(t.problemTitle))]),t._v(" "),t.currentUser?t.isSubmitBlock?[r("l-button",{attrs:{slot:"op",solid:""},on:{click:function(e){return t.$router.replace({hash:"",query:t.$route.query})}},slot:"op"},[t._v("\n      返回题目\n    ")])]:[r("l-button",{attrs:{slot:"op",solid:""},on:{click:function(e){return t.$router.replace({hash:"#submit",query:t.$route.query})}},slot:"op"},[t._v("\n      提交答案\n    ")]),t._v(" "),r("l-free-button",{attrs:{slot:"op",disabled:t.bookmarking},on:{click:function(e){!t.bookmarking&&t.toggleBookmark()}},slot:"op"},[t.bookmarked?[t._v("取消收藏")]:[t._v("加入收藏")]],2),t._v(" "),t.problem.canEdit?r("l-link",{attrs:{slot:"op",to:{name:"problem.edit",params:{pid:t.problem.pid}},blank:""},slot:"op"},[r("l-free-button",{staticClass:"button-in-anchor"},[t._v("\n        编辑题目\n      ")])],1):t._e()]:[t.currentUser?t._e():r("l-button",{attrs:{slot:"op",solid:"",disabled:""},slot:"op"},[t._v("\n      登录后才可提交\n    ")])],t._v(" "),r("l-stats",{attrs:{slot:"stat",fields:t.stats,"color-scheme":"inverse"},slot:"stat"})],2)},[],!1,null,"dbce64be",null);e.default=p.exports},807:function(t,e,r){"use strict";var o=r(8),a=r(146),n={components:{TheHeaderLayout:o.H,UserNav:a.a},props:{layout:{type:[String,Object],default:"normal"},currentUser:{type:Object,default:null},currentTemplate:{type:String,default:null},pageName:{type:String,default:null}}},s=r(7),l=Object(s.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("the-header-layout",t._g(t._b({},"the-header-layout",t.$props,!1),t.$listeners),[r("user-nav",{attrs:{slot:"user-nav",user:t.currentUser},slot:"user-nav"}),t._v(" "),t._t("title",null,{slot:"title"}),t._v(" "),t._t("stat",null,{slot:"stat"}),t._v(" "),t._t("op",null,{slot:"op"})],2)},[],!1,null,null,null);e.a=l.exports},918:function(t,e,r){}}]);
题目翻译

Jan和Petra进行比赛。有n个糖果，每个糖果有两个价值x_i和y_i，如果Petra拿到这个糖果得到x_i的价值，如果Jan拿到这个糖果得到y_i的价值。指定两人谁先开始拿糖果，两个人轮流拿，可以拿任意的糖果。已知Petra拿的策略是拿剩下所有当中x值最大的，如果有多个相同的x值则拿y值最小的那一个；Jan的策略是自己最终获得最大总价值的情况下，使Petra的价值也最大。求最终两人获得的最大价值是多少。

$Petra$和$Jan$进行比赛。

思路

可以知道，Petra是贪心的拿糖果，所以我们可以先把整个糖果序列排序，那么Petra一定是按顺序拿糖果的。假设目前只有颗糖，那么Jan最多只能拿1颗；假设目前只有两颗糖，那么Jan最多也只能拿一颗；假设目前有三颗糖，那么Jan最多可以拿2颗。以此类推，我们可以知道，在有i颗糖的时候，Jan最多拿的糖数是(i+1)/2。

假设现在有无限多的糖果，我们以Jan拿一次然后Petra拿一次作为一个回合。如果是Petra先拿，那么可以把第一次Petra拿的除开算，从第二次开始计算；否则从第一次开始计算。每个回合中，由于Petra的拿糖果方式是固定按顺序拿的，所以如果Jan拿的Petra拿的的下一个，那么Petra只能再拿下下个了；反之如果Jan在后面的糖果中拿一个，那么Petra就只会拿下一个。

我们可以计算出所有x的价值之和，当Jan拿了某一个糖果的时候，sum就减去这个糖果对应的x，最终的sum就是Petra的总价值。

我们维护一个dp数组，其中$dp[i][j]$表示前i个糖果Jan抢走j个之后的总价值。不难发现，i属于[1,n]，j属于[1,(i+1)/2]。最终的答案一定是$dp[n][(n+1)/2]$。状态转移方程是，$dp[i][j]=max(dp[i-1][j],dp[i-1][j-1]+y[i])$当且仅当状态可达的情况下。可以这样理解这个方程：枚举现在选到第i个了。那么一定是从第i-1个转移过来。所以我们需要判断的是当前这个点到底是选还是不选。如果不选，那么第i-1的时候也一定是已经选了j个，所以从$dp[i-1][j]$转移过来；如果是选，那么要选择的一定是第i个，所以从$dp[i-1][j-1]$转移过来，还要加上这个点的价值。然后我们看是否选择了这个点。如果没选择，那么sum就应该减去这个点的x值，否则sum应该减去下一个点的x值。一个细节，第n+1个点的x值要变成0。

但是因为我们选择的点是动态变化的，所以我们需要开一个数组来存储Petra需要从sum中选择的价值。和dp数组一样，我们定$cost[i][j]$表示前i个点选择了j个点的减去的x的和。那么最终Petra的答案就是$sum-cost[n][(n+1)/2]$。由于x的决策是由y决定的，所以我们可以把转移方程中的max重载一下，在计算y的时候把x也计算了。这道题就解决了。